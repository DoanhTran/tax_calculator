!function(e){function t(t){for(var a,o,i=t[0],l=t[1],s=t[2],p=0,m=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);m.length;)m.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={1:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=this["webpackJsonptax-calculator"]=this["webpackJsonptax-calculator"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;c.push([9,0]),n()}({14:function(e,t,n){},2:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(3),o=n.n(c),i=(n(14),n(1));n(2),n(6);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?d(e):t}function v(e){return function(){var t,n=p(e);if(m()){var a=p(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return b(this,t)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}var y=function(e){g(n,e);var t=v(n);function n(e){var a;return l(this,n),(a=t.call(this,e)).state={error:null,isLoaded:!1,taxRate:"no data;",taxRegion:"no data;"},a}return u(n,[{key:"componentWillUnmount",value:function(){window.alert("unmount")}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.taxRate&&this.props.taxRate!==e.taxRate&&this.setState({taxRate:this.props.taxRate}),this.props.taxRegion&&this.props.taxRegion!==e.taxRegion&&this.setState({taxRegion:this.props.taxRegion}),this.props.save!==e.save&&!0===this.props.save){var n=this.props.zipcode;this.setState({taxRate:"fetching data",taxRegion:"fetching data"}),fetch("http://0.0.0.0:5000/taxrate/"+n,{methode:"GET"}).then((function(e){return e.json()})).then((function(e){e.error||chrome.storage.sync.set({currentTax:{rate:e.data.EstimatedCombinedRate,tReg:e.data.TaxRegionName,zip:n}},(function(){})),t.setState({isLoaded:!0,taxRate:e.error?e.error:e.data.EstimatedCombinedRate,taxRegion:e.error?e.error:e.data.TaxRegionName}),t.props.updateTax(e.data.EstimatedCombinedRate)}),(function(e){t.setState({error:!0,isLoaded:!0})}))}}},{key:"render",value:function(){return r.a.createElement("div",{className:"rate-display"},this.state.error?r.a.createElement("p",null,"error: $",this.state.error):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"tax rate: ",this.state.taxRate),r.a.createElement("p",null,"tax region: ",this.state.taxRegion)))}}]),n}(r.a.Component);function E(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(0),s=Object(i.a)(l,2),u=s[0],p=s[1],m=Object(a.useState)({}),f=Object(i.a)(m,2),d=f[0],b=f[1];Object(a.useEffect)((function(){e.editZipClick&&b(e.savedZip)}),[e.editZipClick]);var v=function(e,t){d[e]=t,b(d)},h=function(e){delete d[e],v(d)};return e.editZipClick?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"edit-window"},r.a.createElement(r.a.Fragment,null,Object.keys(e.savedZip).map((function(t){return r.a.createElement(O,{key:t,keyProp:t,zipcode:e.savedZip[t].zip,name:e.savedZip[t].name,editing:!1,onSave:v,deletezip:h})})),c?r.a.createElement(O,{key:u,keyProp:u,zipcode:"",name:"",editing:!0,onSave:function(e,t){v(e,t),o(!1)},deletezip:h,onCancel:function(){o(!1)}}):r.a.createElement("button",{onClick:function(){var e=(new Date).getTime();p(e),o(!0)}},"add")),c?"":r.a.createElement("button",{onClick:function(){e.closeEdit(d)}},"done"),r.a.createElement("button",{onClick:function(){e.closeEdit()}},"close"))):null}function O(e){var t=Object(a.useState)(e.editing),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(e.zipcode?e.zipcode:""),s=Object(i.a)(l,2),u=s[0],p=s[1],m=Object(a.useState)(e.name?e.name:""),f=Object(i.a)(m,2),d=f[0],b=f[1];return null===e.zipcode&&o(!0),c?r.a.createElement("div",{className:"edit-zip-card"},r.a.createElement("label",{htmlFor:"name"},"name:"),r.a.createElement("input",{name:"name",className:"card-input",type:"text",value:d,placeholder:"name this zipcode",onChange:function(e){var t=e.currentTarget.value;b(t)}}),r.a.createElement("label",{htmlFor:"zip"},"zip code:"),r.a.createElement("input",{name:"zip",type:"text",className:"card-input",onChange:function(e){var t=function(e){if(e.length>5)return e.slice(0,5);return e}(e.currentTarget.value);p(function(e){var t=e.slice(-1).charCodeAt(0);return 48<=t&&t<=57?e:e.slice(0,-1)}(t))},placeholder:"zipcode xxxxx",value:u}),r.a.createElement("button",{onClick:function(t){""!==u?(e.onSave(e.keyProp,{name:d,zip:u}),o(!1)):window.alert("zipcode can not be empty")}},"save"),r.a.createElement("button",{onClick:function(t){p(e.zipcode),b(e.name),e.onCancel&&e.onCancel(),o(!1)}},"cancel")):r.a.createElement("div",{className:"edit-zip-card"},r.a.createElement("label",{htmlFor:"name"},"name:"),r.a.createElement("input",{name:"name",className:"card-input card-input-readonly",type:"text",placeholder:"name this zipcode",value:d,readOnly:!0}),r.a.createElement("label",{htmlFor:"zip"},"zip code:"),r.a.createElement("input",{name:"zip",type:"text",className:"card-input card-input-readonly",placeholder:"zipcode xxxxx",readOnly:!0,value:u}),r.a.createElement("button",{onClick:function(e){o(!0)}},"edit"),r.a.createElement("button",{onClick:function(t){e.deletezip(e.keyProp)}},"remove"))}function x(e){var t=e.updateTax,n=r.a.createRef(),c=r.a.createRef(),o=(r.a.createRef(),Object(a.useState)("")),l=Object(i.a)(o,2),s=l[0],u=l[1],p=Object(a.useState)(!1),m=Object(i.a)(p,2),f=m[0],d=m[1],b=Object(a.useState)({}),v=Object(i.a)(b,2),h=v[0],g=v[1],O=Object(a.useState)(!1),x=Object(i.a)(O,2),k=x[0],S=x[1],C=Object(a.useState)(""),R=Object(i.a)(C,2),z=R[0],w=R[1],N=Object(a.useState)(""),T=Object(i.a)(N,2),Z=T[0],L=T[1];Object(a.useEffect)((function(){chrome.storage.sync.get(["currentTax","savedZip"],(function(e){void 0!==e.currentTax?(u(e.currentTax.zip),w(e.currentTax.rate),L(e.currentTax.tReg),d(null)):n.current.focus(),void 0!==e.savedZip&&g(e.savedZip)}))}),[]),Object(a.useEffect)((function(){(f||null===f)&&(c.current.classList.replace("green-outline","no-outline"),document.removeEventListener("click",(function(){})),n.current.removeEventListener("keyup",(function(){}))),!1===f&&c.current.classList.replace("no-outline","green-outline")}),[f]);var P=Object(a.useState)(),F=Object(i.a)(P,2),_=(F[0],F[1]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"ziplabel"},"Zipcode: \xa0"),r.a.createElement("div",{className:"multisearch-container green-outline",ref:c},r.a.createElement("div",{className:"searchBar-container normal"},r.a.createElement("input",{ref:n,className:"zip-input",type:"text",maxLength:"6",height:"3",value:s,size:"10",onChange:function(e){var t=function(e){if(e.length>5)return _("shake"),setTimeout((function(){_()}),200),e.slice(0,5);return e}(e.currentTarget.value);u(function(e){var t=e.slice(-1).charCodeAt(0);return 48<=t&&t<=57?e:e.slice(0,-1)}(t))},onFocus:function(e){var t=c.current;c.current.classList.replace("no-outline","green-outline"),d(!1),e.currentTarget.addEventListener("keyup",(function(e){""!==e.currentTarget.value&&13===e.keyCode&&(d(!0),n.current.blur())})),document.addEventListener("click",(function(e){t.contains(e.target)||d(null)}))}}),f||null===f?r.a.createElement("button",{className:"glass-icon glass-grey",onClick:function(e){n.current.focus()}}):r.a.createElement("button",{className:"glass-icon glass-green",onClick:function(e){d(!0)}})),f||null===f?"":r.a.createElement("div",{className:"search-option-container"},r.a.createElement(j,{savedZip:h,optionClick:function(e){u(e),d(!0)},editZipClick:function(e){S(!0)}}))),r.a.createElement(y,{save:f,zipcode:s,updateTax:t,taxRate:z,taxRegion:Z}),r.a.createElement(E,{editZipClick:k,closeEdit:function(e){e&&(chrome.storage.sync.set({savedZip:h},(function(){})),g(e)),S(!1)},savedZip:h}))}function j(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"searchUnder"}),Object.keys(e.savedZip).map((function(t){return r.a.createElement("button",{className:"savedOptions",key:t,"data-zip":e.savedZip[t].zip,onClick:function(){e.optionClick(e.savedZip[t].zip)}},r.a.createElement("span",null,e.savedZip[t].name),r.a.createElement("span",null,e.savedZip[t].zip))})),r.a.createElement("button",{key:"editsavedbutt",onClick:function(){return e.editZipClick()}},"Add/edit saved zip"))}var k=function(e){g(n,e);var t=v(n);function n(e){var a;return l(this,n),(a=t.call(this,e)).handleSubmit=a.handleSubmit.bind(d(a)),a.reportIssue=a.reportIssue.bind(d(a)),a.cancelClick=a.cancelClick.bind(d(a)),a.process=r.a.createRef(),a.form=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"process process-invisible",ref:a.process},r.a.createElement("p",null,"processing...")),r.a.createElement("div",{className:"report-form-container"},r.a.createElement("button",{onClick:a.cancelClick},"cancel"),r.a.createElement("h3",null,"Report Issue"),r.a.createElement("form",{className:"report",onSubmit:a.handleSubmit},r.a.createElement("label",{htmlFor:"title"},"topic"),r.a.createElement("input",{name:"title",type:"text"}),r.a.createElement("label",{htmlFor:"email"},"email (optional!)"),r.a.createElement("input",{name:"email",type:"text"}),r.a.createElement("label",{htmlFor:"message"},"Please provide \xe5 with some details regarding the issue"),r.a.createElement("input",{name:"message"}),r.a.createElement("button",{type:"submit"},"Submit")))),a.button=r.a.createElement("div",{className:"report-form-main"},r.a.createElement("div",{className:"informationIcon"}),r.a.createElement("div",{className:"report-text"},r.a.createElement("p",null,"If information is incorrect or there are any issues with your experience please",r.a.createElement("button",{id:"report-button",onClick:a.reportIssue},"Report")))),a.state={process:"open"},a}return u(n,[{key:"cancelClick",value:function(e){this.setState({process:"open"})}},{key:"handleSubmit",value:function(e){var t=this;this.process.current.classList.remove("process-invisible");var n={},a=e.target.elements;Object.assign(n,{title:a.title.value,email:a.email.value,message:a.message.value}),JSON.stringify(n),fetch("http://0.0.0.0:5000/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e.error?window.alert("Sorry, something is wrong!"):e.data&&window.alert("Submitted, thank you for your feedback!")}),(function(e){t.setState({error:!0,isLoaded:!0})}))}},{key:"reportIssue",value:function(e){this.setState({process:"write"})}},{key:"render",value:function(){return"open"===this.state.process?this.button:"write"===this.state.process?this.form:null}}]),n}(r.a.Component),S=function(e){var t=e.isChecked,n=e.handleToggle,a=e.size;return r.a.createElement("div",{className:"toggle tg-".concat(a)},r.a.createElement("label",{className:"switch tg-lab-".concat(a)},r.a.createElement("input",{type:"checkbox",className:"toggle-checkbox",checked:t,onChange:n}),r.a.createElement("span",{className:"slider tg-".concat(a)})))};var C=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),s=l[0],u=l[1],p=Object(a.useState)(void 0),m=Object(i.a)(p,2),f=m[0],d=m[1];return Object(a.useEffect)((function(){chrome.storage.sync.get("urlList",(function(e){console.log("result",e),chrome.tabs.query({active:!0,currentWindow:!0},(function(t){var n=new URL(t[0].url).hostname;console.log("domain",n),!0===e.urlList[n]?(console.log("url not in url list"),d(!0)):d(!1)}))}))}),[]),Object(a.useEffect)((function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var t=new URL(e[0].url).hostname,n=Object.assign({},s);n[t]=!!f,u(n)}))}),[f]),Object(a.useEffect)((function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{type:"price",tax:n},(function(e){}))}))}),[n]),Object(a.useEffect)((function(){void 0!==Object.keys(s)[0]&&chrome.runtime.sendMessage({type:"URL",urlList:s},(function(e){}))}),[s]),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"web-enable-container"},r.a.createElement("label",null,"Use tax calculator on this site?"),r.a.createElement("div",{className:"fill-space"}),r.a.createElement(S,{size:"small",handleToggle:function(){d(!f)},isChecked:f})),r.a.createElement("div",{className:"divider"}),r.a.createElement(x,{updateTax:function(e){return c(parseFloat(e)+1)}}),r.a.createElement(k,null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))},6:function(e,t,n){},9:function(e,t,n){e.exports=n(22)}});
//# sourceMappingURL=app.js.map