!function(e){function t(t){for(var n,i,o=t[0],l=t[1],s=t[2],m=0,p=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);p.length;)p.shift()();return c.push.apply(c,s||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(c.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={1:0},c=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=this["webpackJsonptax-calculator"]=this["webpackJsonptax-calculator"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var u=l;c.push([9,0]),a()}({14:function(e,t,a){},2:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),i=a.n(c),o=(a(14),a(1));a(2),a(6);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?f(e):t}function v(e){return function(){var t,a=m(e);if(p()){var n=m(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return b(this,t)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}var y=function(e){g(a,e);var t=v(a);function a(e){var n;return l(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,taxRate:"no data",taxRegion:"no data"},n}return u(a,[{key:"componentWillUnmount",value:function(){window.alert("unmount")}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.taxRate&&this.props.taxRate!==e.taxRate&&this.setState({taxRate:this.props.taxRate}),this.props.taxRegion&&this.props.taxRegion!==e.taxRegion&&this.setState({taxRegion:this.props.taxRegion}),this.props.save!==e.save&&!0===this.props.save){var a=this.props.zipcode;this.setState({taxRate:"fetching data",taxRegion:"fetching data"}),fetch("http://0.0.0.0:5000/taxrate/"+a,{methode:"GET"}).then((function(e){return e.json()})).then((function(e){e.error||chrome.storage.sync.set({currentTax:{rate:e.data.EstimatedCombinedRate,tReg:e.data.TaxRegionName,zip:a}},(function(){})),t.setState({isLoaded:!0,taxRate:e.error?e.error:"".concat(100*Number(e.data.EstimatedCombinedRate)),taxRegion:e.error?e.error:e.data.TaxRegionName}),t.props.updateTax(e.data.EstimatedCombinedRate)}),(function(e){t.setState({error:!0,isLoaded:!0})}))}}},{key:"render",value:function(){return r.a.createElement("div",{className:"rate-display"},this.state.error?r.a.createElement("div",{className:"display-row-1 inner-grid"},r.a.createElement("div",{className:"text-lab"},"error: "),r.a.createElement("div",{className:"text-lab val"},this.state.error)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"display-row-1 inner-grid"},r.a.createElement("div",{className:"text-lab"},"Tax Rate: "),r.a.createElement("div",{className:"text-lab val"},this.state.taxRate)),r.a.createElement("div",{className:"display-row-2 inner-grid"},r.a.createElement("div",{className:"text-lab"},"Region Name: "),r.a.createElement("div",{className:"text-lab val"},this.state.taxRegion))))}}]),a}(r.a.Component);function E(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(0),s=Object(o.a)(l,2),u=s[0],m=s[1],p=Object(n.useState)({}),d=Object(o.a)(p,2),f=d[0],b=d[1];Object(n.useEffect)((function(){e.editZipClick&&b(e.savedZip)}),[e.editZipClick]);var v=function(e,t){f[e]=t,b(f)},h=function(e){delete f[e],v(f)};return e.editZipClick?r.a.createElement("div",{className:"edit-window"},r.a.createElement("div",{className:"edit-header"},r.a.createElement("button",{className:"back-button",onClick:function(){e.closeEdit(f)}},"Back"),r.a.createElement("div",{className:"fill-space"}),r.a.createElement("div",{className:"enable-text"},"Manage Your Zip Code")),r.a.createElement("div",{className:"divider"}),r.a.createElement(r.a.Fragment,null,Object.keys(e.savedZip).map((function(t){return r.a.createElement(x,{key:t,keyProp:t,zipcode:e.savedZip[t].zip,name:e.savedZip[t].name,editing:!1,onSave:v,deletezip:h})})),c?r.a.createElement(x,{key:u,keyProp:u,zipcode:"",name:"",editing:!0,onSave:function(e,t){v(e,t),i(!1)},deletezip:h,onCancel:function(){i(!1)}}):r.a.createElement("button",{className:"primary-button",onClick:function(){var e=(new Date).getTime();m(e),i(!0)}},"Add Zip Code"))):null}function x(e){var t=Object(n.useState)(e.editing),a=Object(o.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(e.zipcode?e.zipcode:""),s=Object(o.a)(l,2),u=s[0],m=s[1],p=Object(n.useState)(e.name?e.name:""),d=Object(o.a)(p,2),f=d[0],b=d[1];return null===e.zipcode&&i(!0),c?r.a.createElement("div",{className:"edit-zip-card"},r.a.createElement("div",{className:"button-icon"},r.a.createElement("button",{className:"cancel-button danger-button",onClick:function(t){m(e.zipcode),b(e.name),e.onCancel&&e.onCancel(),i(!1)}},"Cancel")),r.a.createElement("label",{htmlFor:"name",className:"name-label enable-text"},"name:"),r.a.createElement("input",{name:"name",className:"card-input name-input",type:"text",value:f,placeholder:"name this zipcode",onChange:function(e){var t=e.currentTarget.value;b(t)}}),r.a.createElement("label",{htmlFor:"zip",className:"zip-label enable-text"},"zip code:"),r.a.createElement("input",{name:"zip",type:"text",className:"card-input zip-card-input",onChange:function(e){var t=function(e){if(e.length>5)return e.slice(0,5);return e}(e.currentTarget.value);m(function(e){var t=e.slice(-1).charCodeAt(0);return 48<=t&&t<=57?e:e.slice(0,-1)}(t))},placeholder:"zipcode xxxxx",value:u}),r.a.createElement("button",{onClick:function(t){""!==u?(e.onSave(e.keyProp,{name:f,zip:u}),i(!1)):window.alert("zipcode can not be empty")},className:"edit-save primary-button"},"Save")):r.a.createElement("div",{className:"edit-zip-card"},r.a.createElement("div",{className:"button-icon"},r.a.createElement("button",{className:"edit-button icon-btn",onClick:function(e){i(!0)}}),r.a.createElement("button",{onClick:function(t){e.deletezip(e.keyProp)},className:"remove-button icon-btn"})),r.a.createElement("label",{htmlFor:"name",className:"name-label enable-text"},"name:"),r.a.createElement("input",{name:"name",className:"card-input name-input card-input-readonly",type:"text",placeholder:"name this zipcode",value:f,readOnly:!0}),r.a.createElement("label",{htmlFor:"zip",className:"zip-label enable-text"},"zip code:"),r.a.createElement("input",{name:"zip",type:"text",className:"card-input zip-card-input card-input-readonly",placeholder:"zipcode xxxxx",readOnly:!0,value:u}))}function N(e){var t=e.updateTax,a=r.a.createRef(),c=r.a.createRef(),i=(r.a.createRef(),Object(n.useState)("")),l=Object(o.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(!1),p=Object(o.a)(m,2),d=p[0],f=p[1],b=Object(n.useState)({}),v=Object(o.a)(b,2),h=v[0],g=v[1],x=Object(n.useState)(!1),N=Object(o.a)(x,2),j=N[0],k=N[1],S=Object(n.useState)(""),C=Object(o.a)(S,2),z=C[0],R=C[1],w=Object(n.useState)(""),T=Object(o.a)(w,2),Z=T[0],L=T[1];Object(n.useEffect)((function(){chrome.storage.sync.get(["currentTax","savedZip"],(function(e){void 0!==e.currentTax?(u(e.currentTax.zip),R(e.currentTax.rate),L(e.currentTax.tReg),f(null)):a.current.focus(),void 0!==e.savedZip&&g(e.savedZip)}))}),[]),Object(n.useEffect)((function(){(d||null===d)&&(c.current.classList.replace("green-outline","no-outline"),document.removeEventListener("click",(function(){})),a.current.removeEventListener("keyup",(function(){}))),!1===d&&c.current.classList.replace("no-outline","green-outline")}),[d]);var P=Object(n.useState)(),F=Object(o.a)(P,2),_=(F[0],F[1]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"ziplabel text-lab"},"Zipcode: \xa0"),r.a.createElement("div",{className:"multisearch-container green-outline",ref:c},r.a.createElement("div",{className:"searchBar-container normal"},r.a.createElement("input",{ref:a,className:"zip-input",type:"text",maxLength:"6",height:"3",value:s,size:"10",onChange:function(e){var t=function(e){if(e.length>5)return _("shake"),setTimeout((function(){_()}),200),e.slice(0,5);return e}(e.currentTarget.value);u(function(e){var t=e.slice(-1).charCodeAt(0);return 48<=t&&t<=57?e:e.slice(0,-1)}(t))},onFocus:function(e){var t=c.current;c.current.classList.replace("no-outline","green-outline"),f(!1),e.currentTarget.addEventListener("keyup",(function(e){""!==e.currentTarget.value&&13===e.keyCode&&(f(!0),a.current.blur())})),document.addEventListener("click",(function(e){t.contains(e.target)||f(null)}))}}),d||null===d?r.a.createElement("button",{className:"glass-icon glass-grey",onClick:function(e){a.current.focus()}}):r.a.createElement("button",{className:"glass-icon glass-green",onClick:function(e){f(!0)}})),d||null===d?"":r.a.createElement("div",{className:"search-option-container"},r.a.createElement(O,{savedZip:h,optionClick:function(e){u(e),f(!0)},editZipClick:function(e){k(!0)}}))),r.a.createElement(y,{save:d,zipcode:s,updateTax:t,taxRate:z,taxRegion:Z}),r.a.createElement(E,{editZipClick:j,closeEdit:function(e){e&&(chrome.storage.sync.set({savedZip:h},(function(){})),g(e)),k(!1)},savedZip:h}))}function O(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"searchUnder"}),Object.keys(e.savedZip).map((function(t){return r.a.createElement("button",{className:"savedOptions",key:t,"data-zip":e.savedZip[t].zip,onClick:function(){e.optionClick(e.savedZip[t].zip)}},r.a.createElement("div",{className:"savedIcon"}),r.a.createElement("div",{className:"option-name"},e.savedZip[t].name,":"),r.a.createElement("div",{className:"option-zip"},e.savedZip[t].zip))})),r.a.createElement("button",{className:"manage-zip-button",key:"editsavedbutt",onClick:function(){return e.editZipClick()}},"+ Add/manage your zip code"))}var j=function(e){g(a,e);var t=v(a);function a(e){var n;return l(this,a),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(f(n)),n.reportIssue=n.reportIssue.bind(f(n)),n.cancelClick=n.cancelClick.bind(f(n)),n.process=r.a.createRef(),n.form=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"process process-invisible",ref:n.process},r.a.createElement("p",null,"processing...")),r.a.createElement("div",{className:"report-form-container"},r.a.createElement("div",{className:"edit-header"},r.a.createElement("button",{className:"back-button",onClick:n.cancelClick},"Cancel"),r.a.createElement("div",{className:"fill-space"}),r.a.createElement("div",{className:"enable-text"},"Report Issue")),r.a.createElement("div",{className:"divider"}),r.a.createElement("form",{className:"report",onSubmit:n.handleSubmit},r.a.createElement("label",{className:"text-lab",htmlFor:"title"},"topic"),r.a.createElement("input",{name:"title",className:"report-input",type:"text"}),r.a.createElement("label",{className:"text-lab",htmlFor:"email"},"email (optional!)"),r.a.createElement("input",{name:"email",className:"report-input",type:"text"}),r.a.createElement("label",{className:"text-lab",htmlFor:"message"},"Please provide some details regarding the issue"),r.a.createElement("input",{name:"message",className:"report-input"}),r.a.createElement("button",{className:"primary-button",type:"submit"},"Submit")))),n.button=r.a.createElement("div",{className:"report-form-main"},r.a.createElement("div",{className:"informationIcon"}),r.a.createElement("div",{className:"report-text"},r.a.createElement("div",{className:"small-label"},"If the information is incorrect or there are any issues with your experience please",r.a.createElement("button",{className:"danger-button",onClick:n.reportIssue},"Report")))),n.state={process:"open"},n}return u(a,[{key:"cancelClick",value:function(e){this.setState({process:"open"})}},{key:"handleSubmit",value:function(e){var t=this;this.process.current.classList.remove("process-invisible");var a={},n=e.target.elements;Object.assign(a,{title:n.title.value,email:n.email.value,message:n.message.value}),JSON.stringify(a),fetch("http://0.0.0.0:5000/report/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.error?window.alert("Sorry, something is wrong!"):e.data&&window.alert("Submitted, thank you for your feedback!")}),(function(e){t.setState({error:!0,isLoaded:!0})}))}},{key:"reportIssue",value:function(e){this.setState({process:"write"})}},{key:"render",value:function(){return"open"===this.state.process?this.button:"write"===this.state.process?this.form:null}}]),a}(r.a.Component),k=function(e){var t=e.isChecked,a=e.handleToggle,n=e.size;return r.a.createElement("div",{className:"toggle tg-".concat(n)},r.a.createElement("label",{className:"switch tg-lab-".concat(n)},r.a.createElement("input",{type:"checkbox",className:"toggle-checkbox",checked:t,onChange:a}),r.a.createElement("span",{className:"slider tg-".concat(n)})))};var S=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(void 0),p=Object(o.a)(m,2),d=p[0],f=p[1];return Object(n.useEffect)((function(){chrome.storage.sync.get("urlList",(function(e){console.log("result",e),chrome.tabs.query({active:!0,currentWindow:!0},(function(t){var a=new URL(t[0].url).hostname;console.log("domain",a),!0===e.urlList[a]?(console.log("url not in url list"),f(!0)):f(!1)}))}))}),[]),Object(n.useEffect)((function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var t=new URL(e[0].url).hostname,a=Object.assign({},s);a[t]=!!d,u(a)}))}),[d]),Object(n.useEffect)((function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{type:"price",tax:a},(function(e){}))}))}),[a]),Object(n.useEffect)((function(){void 0!==Object.keys(s)[0]&&chrome.runtime.sendMessage({type:"URL",urlList:s},(function(e){}))}),[s]),r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"web-enable-container"},r.a.createElement("label",{className:"enable-text"},"Use tax calculator on this site?"),r.a.createElement("div",{className:"fill-space"}),r.a.createElement(k,{size:"small",handleToggle:function(){f(!d)},isChecked:d})),r.a.createElement("div",{className:"divider"}),r.a.createElement(N,{updateTax:function(e){return c(parseFloat(e)+1)}}),r.a.createElement(j,null))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))},6:function(e,t,a){},9:function(e,t,a){e.exports=a(22)}});
//# sourceMappingURL=app.js.map