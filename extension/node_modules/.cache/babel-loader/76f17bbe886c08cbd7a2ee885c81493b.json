{"ast":null,"code":"import _classCallCheck from\"/Users/mina/Desktop/tax_calculator/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mina/Desktop/tax_calculator/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/mina/Desktop/tax_calculator/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/mina/Desktop/tax_calculator/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/mina/Desktop/tax_calculator/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";var OPEN=\"open\";var FORM=\"write\";var REQUEST=\"request\";var report=\"\";var ReportForm=/*#__PURE__*/function(_React$Component){_inherits(ReportForm,_React$Component);var _super=_createSuper(ReportForm);function ReportForm(props){var _this;_classCallCheck(this,ReportForm);_this=_super.call(this,props);_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.reportIssue=_this.reportIssue.bind(_assertThisInitialized(_this));// this.formToJSON = this.formToJSON.bind(this);\n_this.form=/*#__PURE__*/React.createElement(\"form\",{className:\"report\",onSubmit:_this.handleSubmit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"title\"},\"topic\"),/*#__PURE__*/React.createElement(\"input\",{name:\"title\",type:\"text\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"email(optional in case you want to hear back from us)\"),/*#__PURE__*/React.createElement(\"input\",{name:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"message\"},\"Please provide detail\"),/*#__PURE__*/React.createElement(\"input\",{name:\"message\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Submit\"));_this.processing=/*#__PURE__*/React.createElement(\"p\",null,\"processing...\");_this.button=/*#__PURE__*/React.createElement(\"button\",{onClick:_this.reportIssue},\"report issue\");_this.state={process:OPEN};return _this;}_createClass(ReportForm,[{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;console.log(\"handle supmit is called\");this.setState({process:REQUEST});var data={};var val=event.target.elements;Object.assign(data,{title:val[\"title\"].value,email:val[\"email\"].value,message:val[\"message\"].value});JSON.stringify(data);fetch(\"http://0.0.0.0:5000/report/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)// headers: { \"Access-Control-Allow-Origin\": \"*\" },\n}).then(function(res){return res.json();}).then(function(result){console.log(\"inresult\");if(result.error){window.alert(\"sorry something is wrong\");console.log(result.error);}else if(result.data){window.alert(\"Submitted, thank you for your feedback\");console.log(result.data);}},function(error){console.log(\"inerror\");console.log(error);_this2.setState({error:true,isLoaded:true});}).then(this.setState({process:OPEN}));}},{key:\"reportIssue\",value:function reportIssue(event){this.setState({process:FORM});}},{key:\"render\",value:function render(){if(report){console.log(report);}if(this.state.process===OPEN){return this.button;}else if(this.state.process===FORM){return this.form;}else if(this.state.process===REQUEST){return this.processing;}else return null;}}]);return ReportForm;}(React.Component);export default ReportForm;/*\nwant json \n{\n    title:\"title\",\n    email:\"email\",\n    message:\"text\"\n\n}\n\n*/","map":{"version":3,"sources":["/Users/mina/Desktop/tax_calculator/src/components/reportForm.js"],"names":["React","OPEN","FORM","REQUEST","report","ReportForm","props","handleSubmit","bind","reportIssue","form","processing","button","state","process","event","console","log","setState","data","val","target","elements","Object","assign","title","value","email","message","JSON","stringify","fetch","method","headers","body","then","res","json","result","error","window","alert","isLoaded","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nconst OPEN = \"open\";\nconst FORM = \"write\";\nconst REQUEST = \"request\";\nlet report = \"\";\nclass ReportForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.reportIssue = this.reportIssue.bind(this);\n    // this.formToJSON = this.formToJSON.bind(this);\n\n    this.form = (\n      <form className=\"report\" onSubmit={this.handleSubmit}>\n        <label htmlFor=\"title\">topic</label>\n        <input name=\"title\" type=\"text\"></input>\n        <label htmlFor=\"email\">\n          email(optional in case you want to hear back from us)\n        </label>\n        <input name=\"email\" type=\"text\"></input>\n        <label htmlFor=\"message\">Please provide detail</label>\n        <input name=\"message\"></input>\n        <button type=\"submit\">Submit</button>\n      </form>\n    );\n\n    this.processing = <p>processing...</p>;\n    this.button = <button onClick={this.reportIssue}>report issue</button>;\n    this.state = { process: OPEN };\n  }\n\n  handleSubmit(event) {\n    console.log(\"handle supmit is called\");\n    this.setState({ process: REQUEST });\n\n    let data = {};\n    const val = event.target.elements;\n    Object.assign(data, {\n      title: val[\"title\"].value,\n      email: val[\"email\"].value,\n      message: val[\"message\"].value,\n    });\n    JSON.stringify(data);\n    fetch(\"http://0.0.0.0:5000/report/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(data),\n      // headers: { \"Access-Control-Allow-Origin\": \"*\" },\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          console.log(\"inresult\");\n          if (result.error) {\n            window.alert(\"sorry something is wrong\");\n            console.log(result.error);\n          } else if (result.data) {\n            window.alert(\"Submitted, thank you for your feedback\");\n            console.log(result.data);\n          }\n        },\n        (error) => {\n          console.log(\"inerror\");\n          console.log(error);\n          this.setState({ error: true, isLoaded: true });\n        }\n      )\n      .then(this.setState({ process: OPEN }));\n  }\n\n  reportIssue(event) {\n    this.setState({ process: FORM });\n  }\n\n  render() {\n    if (report) {\n      console.log(report);\n    }\n    if (this.state.process === OPEN) {\n      return this.button;\n    } else if (this.state.process === FORM) {\n      return this.form;\n    } else if (this.state.process === REQUEST) {\n      return this.processing;\n    } else return null;\n  }\n}\n\nexport default ReportForm;\n/*\nwant json \n{\n    title:\"title\",\n    email:\"email\",\n    message:\"text\"\n\n}\n\n*/\n"]},"metadata":{},"sourceType":"module"}