{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";//import Stack from 'Stack';\n/*global chrome*/export default function Test2(){// const title = useRef(null)\n// const tab_title = useRef('')\n// var list = []\n// }\n/*result is body element node i think ```o_o```*/ // function findprice(node){\n//     //node.setAttribute('visited', true);\n//     //console.log(\"node's visited\", node.getAttribute('visited'));\n//     if (node.nodeType === 3 && node.nodeValue.includes('$')) {\n//         list.append(node);\n//         title.current.innerHTML = title + node.nodeValue;\n//         console.log(list.length);\n//     }\n//     console.log('1');\n//     if (node.hasChildNodes()){\n//         let children = node.childNodes;  \n//         for (let i = 0; i < children.length; i++){\n//             findprice(children[i]);\n//         }      \n//     }\n// if (node.childNodes.length === 0){\n//     node.childNodes.forEach(element => {\n//         findprice(element);    \n//     });  \n// }\n//}\nfunction getDOM(){//var list = []\nfunction findprice(node){if(node.nodeType===3&&node.nodeValue.includes('$')&&!isNaN(parseFloat(node.nodeValue.slice(1).trim()))){//list.append(node);\nvar classname=node.parentElement.className;list.push(classname);//console.log(list);\nnode.nodeValue='hello';console.log('$ node');console.log(\"classname: \",classname);}console.log('no $');if(node.hasChildNodes()){var children=node.childNodes;for(var i=0;i<children.length;i++){findprice(children[i]);}}}var list=[];findprice(document);return list;}function printresult(array){console.log(array);}chrome.tabs.query({active:true},function(tabs){var tab=tabs[0];//tab_title.current = tab.title;\n//hmm getting the body node\nchrome.tabs.executeScript(tab.id,{code:'('+getDOM+')()'},printresult);});// var tab_title = '';\n// function display_h1 (results){\n//     let h1=results;\n//     document.querySelector(\"#id1\").innerHTML = \"<p>tab title: \" + tab_title + \"</p><p>dom h1: \" + h1 + \"</p>\";\n// }\n// chrome.tabs.query({active: true}, function(tabs) {\n// var tab = tabs[0];\n// tab_title = tab.title;\n// chrome.tabs.executeScript(tab.id, {\n//     code: 'document.querySelector(\"h1\").textContent'\n// }, display_h1);\n// });\nreturn/*#__PURE__*/React.createElement(\"h1\",null,\"hello\");}","map":{"version":3,"sources":["/Users/doanhtran/Downloads/GitHub/tax-calculator/src/components/Test2/Test2.js"],"names":["React","useState","useEffect","useRef","Test2","getDOM","findprice","node","nodeType","nodeValue","includes","isNaN","parseFloat","slice","trim","classname","parentElement","className","list","push","console","log","hasChildNodes","children","childNodes","i","length","document","printresult","array","chrome","tabs","query","active","tab","executeScript","id","code"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAkD,OAAlD,CACA;AACA,iBAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAE5B;AACA;AACA;AAKA;AACA,iDAV4B,CAW5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAGI;AACA;AACA;AACA;AACA;AACJ;AAGD,QAASC,CAAAA,MAAT,EAAkB,CACb;AAEA,QAASC,CAAAA,SAAT,CAAmBC,IAAnB,CAAwB,CAEpB,GAAIA,IAAI,CAACC,QAAL,GAAkB,CAAlB,EAAuBD,IAAI,CAACE,SAAL,CAAeC,QAAf,CAAwB,GAAxB,CAAvB,EAAuD,CAACC,KAAK,CAACC,UAAU,CAACL,IAAI,CAACE,SAAL,CAAeI,KAAf,CAAqB,CAArB,EAAwBC,IAAxB,EAAD,CAAX,CAAjE,CAAgH,CAC5G;AAEA,GAAMC,CAAAA,SAAS,CAAGR,IAAI,CAACS,aAAL,CAAmBC,SAArC,CACAC,IAAI,CAACC,IAAL,CAAUJ,SAAV,EACA;AACAR,IAAI,CAACE,SAAL,CAAiB,OAAjB,CACAW,OAAO,CAACC,GAAR,CAAY,QAAZ,EACAD,OAAO,CAACC,GAAR,CAAa,aAAb,CAA4BN,SAA5B,EACH,CACDK,OAAO,CAACC,GAAR,CAAY,MAAZ,EACA,GAAId,IAAI,CAACe,aAAL,EAAJ,CAAyB,CACrB,GAAIC,CAAAA,QAAQ,CAAGhB,IAAI,CAACiB,UAApB,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,QAAQ,CAACG,MAA7B,CAAqCD,CAAC,EAAtC,CAAyC,CACrCnB,SAAS,CAACiB,QAAQ,CAACE,CAAD,CAAT,CAAT,CACH,CACJ,CACJ,CAED,GAAIP,CAAAA,IAAI,CAAE,EAAV,CAEAZ,SAAS,CAACqB,QAAD,CAAT,CACA,MAAOT,CAAAA,IAAP,CACH,CAED,QAASU,CAAAA,WAAT,CAAqBC,KAArB,CAA2B,CACvBT,OAAO,CAACC,GAAR,CAAYQ,KAAZ,EACH,CAEDC,MAAM,CAACC,IAAP,CAAYC,KAAZ,CAAkB,CAACC,MAAM,CAAE,IAAT,CAAlB,CAAkC,SAASF,IAAT,CAAe,CAC7C,GAAIG,CAAAA,GAAG,CAAGH,IAAI,CAAC,CAAD,CAAd,CACA;AAEA;AACAD,MAAM,CAACC,IAAP,CAAYI,aAAZ,CAA0BD,GAAG,CAACE,EAA9B,CAAkC,CAC9BC,IAAI,CAAE,IAAIhC,MAAJ,CAAW,KADa,CAAlC,CAEGuB,WAFH,EAGH,CARD,EAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACA,sCADA,CAGH","sourcesContent":["import React, { useState, useEffect, useRef} from \"react\";\n//import Stack from 'Stack';\n/*global chrome*/\n\nexport default function Test2 (){\n\n    // const title = useRef(null)\n    // const tab_title = useRef('')\n    // var list = []\n\n\n\n    \n    // }\n    /*result is body element node i think ```o_o```*/\n    // function findprice(node){\n    //     //node.setAttribute('visited', true);\n    //     //console.log(\"node's visited\", node.getAttribute('visited'));\n    //     if (node.nodeType === 3 && node.nodeValue.includes('$')) {\n    //         list.append(node);\n    //         title.current.innerHTML = title + node.nodeValue;\n    //         console.log(list.length);\n    //     }\n    //     console.log('1');\n    //     if (node.hasChildNodes()){\n            \n    //         let children = node.childNodes;  \n    //         for (let i = 0; i < children.length; i++){\n                \n    //             findprice(children[i]);\n\n    //         }      \n    //     }\n        \n        \n        // if (node.childNodes.length === 0){\n        //     node.childNodes.forEach(element => {\n        //         findprice(element);    \n        //     });  \n        // }\n    //}\n    \n\n   function getDOM (){\n        //var list = []\n\n        function findprice(node){\n            \n            if (node.nodeType === 3 && node.nodeValue.includes('$') && !isNaN(parseFloat(node.nodeValue.slice(1).trim())) ) {\n                //list.append(node);\n\n                const classname = node.parentElement.className;\n                list.push(classname);\n                //console.log(list);\n                node.nodeValue = 'hello'\n                console.log('$ node');\n                console.log (\"classname: \", classname);\n            }\n            console.log('no $');\n            if (node.hasChildNodes()){\n                let children = node.childNodes;  \n                for (let i = 0; i < children.length; i++){\n                    findprice(children[i]);\n                }      \n            }\n        }\n       \n        var list =[];\n\n        findprice(document);\n        return list;\n    }\n \n    function printresult(array){\n        console.log(array);\n    }\n\n    chrome.tabs.query({active: true}, function(tabs) {\n        var tab = tabs[0];\n        //tab_title.current = tab.title;\n\n        //hmm getting the body node\n        chrome.tabs.executeScript(tab.id, {\n            code: '('+getDOM+')()'\n        }, printresult);\n    });\n    \n\n    \n    // var tab_title = '';\n    // function display_h1 (results){\n    //     let h1=results;\n    //     document.querySelector(\"#id1\").innerHTML = \"<p>tab title: \" + tab_title + \"</p><p>dom h1: \" + h1 + \"</p>\";\n    // }\n    // chrome.tabs.query({active: true}, function(tabs) {\n    // var tab = tabs[0];\n    // tab_title = tab.title;\n    // chrome.tabs.executeScript(tab.id, {\n    //     code: 'document.querySelector(\"h1\").textContent'\n    // }, display_h1);\n    // });\n\n    return(\n    <h1>hello</h1>\n    )\n}"]},"metadata":{},"sourceType":"module"}