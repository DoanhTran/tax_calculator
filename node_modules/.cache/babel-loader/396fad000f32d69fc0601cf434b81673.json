{"ast":null,"code":"import _slicedToArray from\"/Users/doanhtran/Downloads/GitHub/tax-calculator/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";// import logo from \"./logo.svg\";\nimport\"./App.css\";import InputBox from\"./components/inputbox/inputBox\";import ReportForm from\"./components/reportForm\";/*global chrome*/function App(){var PRICE=\"price\";var _useState=useState(),_useState2=_slicedToArray(_useState,2),taxRate=_useState2[0],setTaxRate=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),trackSite=_useState4[0],setTrackSite=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),urlList=_useState6[0],setUrlList=_useState6[1];var url='URL';var handleToggle=function handleToggle(){setTrackSite(!trackSite);};useEffect(function(){chrome.tabs.query({active:true,currentWindow:true},function(tabs){var url=new URL(tabs[0].url);var domain=url.hostname;if(trackSite){setUrlList(urlList.concat(domain));}// else {\n//   let index = urlList.indexOf(url);\n//   setUrlList(urlList.splice(index, 1));\n// }\nvar urlCopy=Object.assign({},urlList);if(trackSite){if(!(domain in urlList)){urlCopy[domain]='tracking';setUrlList(urlCopy);}}else{if(domain in urlList){delete urlCopy[domain];setUrlList(urlCopy);}}});},[trackSite]);useEffect(function(){chrome.tabs.query({active:true,currentWindow:true},function(tabs){chrome.tabs.sendMessage(tabs[0].id,{type:PRICE,tax:taxRate},function(response){});});},[taxRate]);useEffect(function(){chrome.runtime.sendMessage({type:url,urlList:urlList},function(response){console.log(\"sending url list\");});},[urlList]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(InputBox,{updateTax:function updateTax(tax){return setTaxRate(parseFloat(tax)+1);}}),/*#__PURE__*/React.createElement(ReportForm,null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Would you like to run tax extension on this site?\"),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",onChange:handleToggle})));}export default App;","map":{"version":3,"sources":["/Users/doanhtran/Downloads/GitHub/tax-calculator/src/App.js"],"names":["React","useState","useEffect","InputBox","ReportForm","App","PRICE","taxRate","setTaxRate","trackSite","setTrackSite","urlList","setUrlList","url","handleToggle","chrome","tabs","query","active","currentWindow","URL","domain","hostname","concat","urlCopy","Object","assign","sendMessage","id","type","tax","response","runtime","console","log","parseFloat"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\n// import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport InputBox from \"./components/inputbox/inputBox\";\nimport ReportForm from \"./components/reportForm\";\n\n/*global chrome*/\nfunction App() {\n  var PRICE = \"price\";\n  const [taxRate, setTaxRate] = useState();\n  \n  const [trackSite, setTrackSite] = useState(false);\n  const [urlList, setUrlList] = useState([]);\n  const url = 'URL'\n\n  const handleToggle = () => {\n    setTrackSite(!trackSite)\n  }\n\n\n  useEffect(() => {\n  chrome.tabs.query({active: true, currentWindow: true}, tabs => {\n    const url = new URL(tabs[0].url);\n    const domain = url.hostname;\n    if (trackSite) {\n      setUrlList(urlList.concat(domain));  \n    }\n    \n    // else {\n    //   let index = urlList.indexOf(url);\n    //   setUrlList(urlList.splice(index, 1));\n    // }\n   \n    let urlCopy = Object.assign({}, urlList)\n  \n    if (trackSite) {\n      if (!(domain in urlList)) {\n        urlCopy[domain] = 'tracking'\n        setUrlList(urlCopy)\n      }\n    }\n\n    else {\n      if (domain in urlList) {\n        delete urlCopy[domain]\n        setUrlList(urlCopy)\n      }\n    }\n  })\n  }, [trackSite])\n\n\n  useEffect(()=>{\n    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\n      chrome.tabs.sendMessage(tabs[0].id, {type: PRICE, tax: taxRate}, function(response) {\n      }); \n    });   \n  },[taxRate]);\n\n\n\n  useEffect(() => {\n    chrome.runtime.sendMessage({type: url, urlList: urlList}, function(response){\n      console.log(\"sending url list\");\n    });\n  }, [urlList])\n\n\n  return (\n    <div>\n      <InputBox updateTax = {(tax)=>setTaxRate(parseFloat(tax)+1)}/>\n      <ReportForm />\n      <div>\n         <label>Would you like to run tax extension on this site?</label>\n         <input type=\"checkbox\" onChange={handleToggle}/>\n       </div>\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}